---
import BaseLayout from '../layouts/BaseLayout.astro';
import Hero from '../components/sections/Hero.astro';
import TrustBar from '../components/sections/TrustBar.astro';
import ServicesGrid from '../components/sections/ServicesGrid.astro';
import EmergencyBand from '../components/sections/EmergencyBand.astro';
import ProcessSteps from '../components/sections/ProcessSteps.astro';
import WhyChooseUs from '../components/sections/WhyChooseUs.astro';
import FeaturedWork from '../components/sections/FeaturedWork.astro';
import Testimonials from '../components/sections/Testimonials.astro';
import CTASection from '../components/sections/CTASection.astro';
import CTAIntermediate from '../components/sections/CTAIntermediate.astro';

const seoTitle = "iFIXX Charlotte | 24/7 Emergency Repairs & Remodeling | ⭐5.0 (87)";
const seoDescription = "Charlotte's trusted handyman & remodeling experts since 2019. Emergency repairs, kitchen & bath remodels, same-day service. ⭐5.0 (87 reviews). Free estimates! Call (980) 391-6833 or book online.";

// LocalBusiness Schema - Enhanced for Emergency & Handyman Services
const localBusinessSchema = {
  "@context": "https://schema.org",
  "@type": "HomeAndConstructionBusiness",
  "@id": "https://www.ifixxnc.com/#business",
  "name": "iFixx Remodeling & Handyman Services",
  "description": seoDescription,
  "url": "https://www.ifixxnc.com",
  "telephone": "+1-980-391-6833",
  "email": "ifixx.hs@gmail.com",
  "logo": {
    "@type": "ImageObject",
    "url": "https://www.ifixxnc.com/images/logo.svg",
    "width": 200,
    "height": 60
  },
  "image": "https://www.ifixxnc.com/images/ui/hero-bg.jpg",
  "address": {
    "@type": "PostalAddress",
    "addressLocality": "Charlotte",
    "addressRegion": "NC",
    "postalCode": "28226",
    "addressCountry": "US"
  },
  "geo": {
    "@type": "GeoCoordinates",
    "latitude": "35.2271",
    "longitude": "-80.8431"
  },
  "areaServed": [
    { "@type": "City", "name": "Charlotte", "containedInPlace": { "@type": "State", "name": "North Carolina" } },
    { "@type": "City", "name": "Matthews", "containedInPlace": { "@type": "State", "name": "North Carolina" } },
    { "@type": "City", "name": "Waxhaw", "containedInPlace": { "@type": "State", "name": "North Carolina" } },
    { "@type": "City", "name": "Pineville", "containedInPlace": { "@type": "State", "name": "North Carolina" } },
    { "@type": "City", "name": "Monroe", "containedInPlace": { "@type": "State", "name": "North Carolina" } },
    { "@type": "City", "name": "Rock Hill", "containedInPlace": { "@type": "State", "name": "South Carolina" } }
  ],
  "priceRange": "$$",

  // Service Catalog - Emergency & Handyman prioritized
  "hasOfferCatalog": {
    "@type": "OfferCatalog",
    "name": "iFixx Home Services",
    "itemListElement": [
      {
        "@type": "OfferCatalog",
        "name": "Emergency Services",
        "description": "Same-day emergency home repairs in Charlotte, NC",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Burst Pipes & Leaks",
              "description": "Same-day emergency plumbing repairs - burst pipes, leaks, clogs"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Electrical Issues",
              "description": "Same-day emergency electrical repairs - outages, sparks, safety hazards"
            }
          },
          {
            "@type": "Offer",
            "itemOffered": {
              "@type": "Service",
              "name": "Emergency Water Damage",
              "description": "Urgent water damage response and repairs"
            }
          }
        ]
      },
      {
        "@type": "OfferCatalog",
        "name": "Handyman Services",
        "description": "Professional handyman services for all home repairs",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "General Repairs", "url": "https://www.ifixxnc.com/repairs/quick-fix" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Carpentry", "url": "https://www.ifixxnc.com/repairs/carpentry" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Plumbing", "url": "https://www.ifixxnc.com/repairs/plumbing" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Electrical", "url": "https://www.ifixxnc.com/repairs/electrical" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Painting & Drywall", "url": "https://www.ifixxnc.com/repairs/painting" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Doors & Windows", "url": "https://www.ifixxnc.com/repairs/doors-windows" }
          }
        ]
      },
      {
        "@type": "OfferCatalog",
        "name": "Remodeling Services",
        "description": "Kitchen and bathroom remodeling in Charlotte",
        "itemListElement": [
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Kitchen Remodeling" }
          },
          {
            "@type": "Offer",
            "itemOffered": { "@type": "Service", "name": "Bathroom Remodeling" }
          }
        ]
      }
    ]
  },

  // Actions - Enable direct calls and quotes from search results
  "potentialAction": [
    {
      "@type": "ReserveAction",
      "name": "Request Free Estimate",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "https://www.ifixxnc.com/contact",
        "actionPlatform": [
          "http://schema.org/DesktopWebPlatform",
          "http://schema.org/MobileWebPlatform"
        ]
      },
      "result": {
        "@type": "Reservation",
        "name": "Free Estimate Request"
      }
    },
    {
      "@type": "CommunicateAction",
      "name": "Call Now",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "tel:+19803916833",
        "actionPlatform": [
          "http://schema.org/MobileWebPlatform"
        ]
      }
    }
  ],

  // Ratings with detailed breakdown
  "aggregateRating": {
    "@type": "AggregateRating",
    "ratingValue": "5.0",
    "bestRating": "5",
    "worstRating": "1",
    "reviewCount": "87",
    "ratingCount": "87"
  },

  // Real customer reviews for rich snippets
  "review": [
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Michael R."
      },
      "datePublished": "2025-11-28",
      "reviewBody": "Called iFixx for an emergency plumbing issue late at night. They responded quickly and fixed our burst pipe the same evening. Professional, honest, and fairly priced. Highly recommend!"
    },
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "Sarah T."
      },
      "datePublished": "2025-12-10",
      "reviewBody": "Best handyman service in Charlotte! They handled multiple repairs in one visit - fixed our leaky faucet, patched drywall, and installed new light fixtures. Will definitely use again."
    },
    {
      "@type": "Review",
      "reviewRating": {
        "@type": "Rating",
        "ratingValue": "5",
        "bestRating": "5"
      },
      "author": {
        "@type": "Person",
        "name": "David L."
      },
      "datePublished": "2025-12-22",
      "reviewBody": "Had an electrical emergency on a Sunday - outlets sparking in the kitchen. iFixx came out within an hour and resolved the issue safely. Fast, reliable service when you need it most."
    }
  ],

  // Hours - Regular + 24/7 Emergency
  "openingHoursSpecification": [
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
      "opens": "07:00",
      "closes": "18:00",
      "description": "Regular Business Hours"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": "Saturday",
      "opens": "08:00",
      "closes": "14:00",
      "description": "Saturday Hours"
    },
    {
      "@type": "OpeningHoursSpecification",
      "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
      "opens": "00:00",
      "closes": "23:59",
      "description": "Same-Day Emergency Services Available"
    }
  ],

  "sameAs": [
    "https://facebook.com/ifixxnc",
    "https://instagram.com/ifixxnc"
  ],

  // Additional business attributes
  "paymentAccepted": ["Cash", "Credit Card", "Debit Card", "Check"],
  "currenciesAccepted": "USD",
  "isAccessibleForFree": false,
  "slogan": "Charlotte's Trusted Handyman & Emergency Repair Services"
};
---

<BaseLayout 
  title={seoTitle}
  description={seoDescription}
  canonical="/"
>
  <Fragment slot="schema">
    <script type="application/ld+json" set:html={JSON.stringify(localBusinessSchema)} />
  </Fragment>

  <!-- Homepage Sections -->
  <!-- 1. Hero -->
  <Hero />

  <!-- Trust Bar (below hero) -->
  <TrustBar />

  <!-- 2. Services Overview -->
  <ServicesGrid />

  <!-- 3. Emergency Callout Band -->
  <EmergencyBand />

  <!-- 4. 3-Step Process -->
  <ProcessSteps />

  <!-- 5. Why Choose iFixx -->
  <WhyChooseUs />

  <!-- 6. Featured Work -->
  <FeaturedWork />

  <!-- Intermediate CTA -->
  <CTAIntermediate
    headline="Like What You See?"
    subheadline="Let's discuss your project. Free estimates, no obligation."
    variant="primary"
  />

  <!-- 7. Testimonials -->
  <Testimonials />

  <!-- 8. Final CTA -->
  <CTASection />
</BaseLayout>
