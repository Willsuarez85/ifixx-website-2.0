---
import PillarLayout from '../../layouts/PillarLayout.astro';
import { getCollection } from 'astro:content';
import TrustBar from '../../components/sections/TrustBar.astro';
import EmergencyBand from '../../components/sections/EmergencyBand.astro';
import ScrollGallery from '../../components/sections/ScrollGallery.astro';
import WhyChooseUs from '../../components/sections/WhyChooseUs.astro';
import FeaturedWork from '../../components/sections/FeaturedWork.astro';
import CTAIntermediate from '../../components/sections/CTAIntermediate.astro';
import GoogleReviews from '../../components/sections/GoogleReviews.astro';
import CTASection from '../../components/sections/CTASection.astro';

// Get all services with category 'remodeling'
const allServices = await getCollection('services');
const remodelingServices = allServices.filter(s => s.data.category === 'remodeling');

// Get all locations for internal linking
const locations = await getCollection('cities');

const pillar = {
  title: "Home Remodeling Services",
  slug: "remodeling",
  description: "Charlotte's family-owned remodeling team. Kitchen renovations, bathroom remodels, basement finishing, and flooring installation. 500+ projects completed across South Charlotte, Ballantyne, Matthews, and beyond.",
  seo: {
    title: "Home Remodeling Contractors Charlotte NC | iFixx",
    description: "Family-owned remodeling contractors serving Charlotte for 5+ years. Kitchen renovations, bathroom remodels, basement finishing. 500+ projects. Free consultations. Call (980) 391-6833."
  }
};

// Define services for schema
const plannedServices = [
  {
    name: "Kitchen Remodeling",
    slug: "kitchen-remodeling",
    description: "Complete kitchen renovations including cabinets, countertops, flooring, and appliance installation.",
    image: "/images/projects/kitchen-white-gray-island-black-pendants.webp"
  },
  {
    name: "Bathroom Remodeling",
    slug: "bathroom-remodeling",
    description: "Full bathroom renovations from tile and fixtures to vanities and lighting upgrades.",
    image: "/images/projects/bathroom-remodeling-modern-glass-shower-vanity.webp"
  },
  {
    name: "Basement Finishing",
    slug: "basement-finishing",
    description: "Transform your basement into livable space with framing, drywall, flooring, and electrical.",
    image: "/images/projects/living-room-fireplace-white-brick.webp"
  },
  {
    name: "Flooring Installation",
    slug: "flooring-installation",
    description: "Hardwood, laminate, tile, and vinyl flooring installation for any room in your home.",
    image: "/images/projects/flooring-installation-modern-living-room-interior.webp"
  },
  {
    name: "Outdoor Living",
    slug: "outdoor-living",
    description: "Custom decks, patios, screened porches, and outdoor kitchens for your Charlotte home.",
    image: "/images/projects/outdoor-living-covered-porch-deck-wood-ceiling.webp"
  }
];

// Use actual services if they exist, otherwise use planned services
const services = remodelingServices.length > 0
  ? remodelingServices.map(s => ({
      name: s.data.title,
      slug: s.slug,
      description: s.data.summary,
      image: s.data.heroImage
    }))
  : plannedServices;
---

<PillarLayout pillar={pillar} services={services}>
  <!-- 1. Hero Section ‚Äî matches homepage style -->
  <section class="relative bg-neutral-900 overflow-hidden">
    <div class="absolute inset-0 z-0">
      <img
        src="/images/projects/kitchen-remodeling-luxury-white-cabinets-island-pendant-lights.webp"
        alt="Kitchen remodeling project in Charlotte"
        class="w-full h-full object-cover"
        loading="eager"
        fetchpriority="high"
        decoding="async"
      />
      <div class="absolute inset-0 bg-gradient-to-r from-neutral-900/95 via-neutral-900/80 to-neutral-900/40"></div>
    </div>
    <div class="container relative z-10">
      <div class="py-16 md:py-20 lg:py-28">
        <div class="max-w-3xl">
          <!-- Badge ‚Äî like homepage -->
          <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-neutral-800 border border-neutral-700 mb-6">
            <span>üèÜ</span>
            <span class="font-bold text-sm tracking-wide uppercase text-white">5 Years <span class="text-primary-500">Transforming Charlotte Homes</span></span>
          </div>

          <!-- Breadcrumb -->
          <nav class="flex items-center gap-2 text-sm text-neutral-400 mb-6">
            <a href="/" class="hover:text-white transition-colors">Home</a>
            <span>/</span>
            <span class="text-primary-500">Remodeling</span>
          </nav>

          <h1 class="text-4xl sm:text-5xl lg:text-7xl font-heading font-bold text-white mb-6 leading-tight">
            Charlotte's <span class="text-primary-500">Family-Owned</span><br />
            Remodeling Team
          </h1>
          <p class="text-lg md:text-xl text-neutral-200 mb-6 font-medium">
            Kitchens, Bathrooms, Home Makeovers and Everyday Repairs
          </p>
          <p class="text-base md:text-lg text-neutral-400 mb-8 max-w-xl">
            Family-owned contractors serving Charlotte, NC with expert craftsmanship and trusted service.
            500+ projects completed‚Äîand we treat every home like it's our own.
          </p>

          <div class="flex flex-col sm:flex-row gap-4">
            <a href="/contact" class="btn btn-primary text-lg px-8 py-4">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
              </svg>
              Schedule Free Consultation
            </a>
            <a href="tel:+19803916833" class="btn btn-secondary text-lg px-8 py-4" data-event="phone_click">
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
              </svg>
              Call (980) 391-6833
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 2. Trust Bar -->
  <TrustBar />

  <!-- 3. Services Grid ‚Äî bigger cards with images -->
  <section class="section bg-white">
    <div class="container">
      <div class="text-center max-w-2xl mx-auto mb-12 lg:mb-16">
        <h2 class="text-3xl lg:text-4xl font-heading font-bold text-neutral-900 mb-4">
          Remodeling Services for Charlotte Homes
        </h2>
        <p class="text-lg text-neutral-600">
          Whether you're updating a 1950s ranch in Dilworth or modernizing a newer home in Waxhaw,
          we bring the same care and craftsmanship to every project.
        </p>
      </div>

      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
        {services.map((service) => (
          <a
            href={`/remodeling/${service.slug}`}
            class="card group overflow-hidden"
          >
            <div class="aspect-[4/3] overflow-hidden">
              <img
                src={service.image || '/images/projects/Ifixx-portfolio1.webp'}
                alt={`${service.name} in Charlotte, NC`}
                class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"
                loading="lazy"
                decoding="async"
                width="400"
                height="300"
              />
            </div>
            <div class="p-6">
              <h3 class="text-xl font-heading font-bold text-neutral-900 mb-2 group-hover:text-primary-600 transition-colors">
                {service.name}
              </h3>
              <p class="text-neutral-600 text-sm mb-4 line-clamp-2">
                {service.description}
              </p>
              <div class="flex items-center text-primary-600 font-heading font-semibold text-sm uppercase tracking-wide">
                Get Quote
                <svg class="w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
              </div>
            </div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- 4. Emergency Band -->
  <EmergencyBand />

  <!-- 5. How It Works ‚Äî with image, like homepage -->
  <section class="section section-alt overflow-hidden">
    <div class="container">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16 items-center">
        <!-- Image Side -->
        <div class="relative order-2 lg:order-1">
          <div class="relative rounded-2xl overflow-hidden shadow-2xl">
            <img
              src="/images/projects/kitchen-remodeling-before-after-transformation.webp"
              alt="Kitchen remodeling before and after by iFixx Charlotte"
              class="w-full h-auto object-cover aspect-[4/3]"
              width="600"
              height="450"
              loading="lazy"
              decoding="async"
            />
            <div class="absolute bottom-4 left-4 bg-white/95 backdrop-blur-sm rounded-lg px-4 py-3 shadow-lg">
              <div class="flex items-center gap-3">
                <div class="w-10 h-10 bg-primary-500 rounded-full flex items-center justify-center">
                  <svg class="w-5 h-5 text-neutral-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                  </svg>
                </div>
                <div>
                  <p class="font-heading font-bold text-neutral-900 text-sm">500+ Projects</p>
                  <p class="text-xs text-neutral-600">Completed in Charlotte</p>
                </div>
              </div>
            </div>
          </div>
          <div class="absolute -bottom-6 -right-6 w-32 h-32 bg-primary-100 rounded-full -z-10"></div>
        </div>

        <!-- Content Side -->
        <div class="order-1 lg:order-2">
          <div class="mb-10">
            <h2 class="text-3xl lg:text-4xl font-heading font-bold text-neutral-900 mb-4">
              Our Remodeling Process
            </h2>
            <p class="text-lg text-neutral-600">
              From initial consultation to final walkthrough, we guide you through every step.
            </p>
          </div>

          <div class="space-y-8">
            <div class="flex gap-5">
              <div class="flex-shrink-0">
                <div class="w-14 h-14 rounded-full bg-primary-500 flex items-center justify-center shadow-lg">
                  <span class="text-xl font-heading font-bold text-neutral-900">01</span>
                </div>
                <div class="w-0.5 h-8 bg-primary-200 mx-auto mt-2"></div>
              </div>
              <div class="pt-2">
                <h3 class="text-xl font-heading font-semibold text-neutral-900 mb-2">Consultation</h3>
                <p class="text-neutral-600 leading-relaxed">We discuss your vision, assess the space, and understand your goals and budget.</p>
              </div>
            </div>
            <div class="flex gap-5">
              <div class="flex-shrink-0">
                <div class="w-14 h-14 rounded-full bg-primary-500 flex items-center justify-center shadow-lg">
                  <span class="text-xl font-heading font-bold text-neutral-900">02</span>
                </div>
                <div class="w-0.5 h-8 bg-primary-200 mx-auto mt-2"></div>
              </div>
              <div class="pt-2">
                <h3 class="text-xl font-heading font-semibold text-neutral-900 mb-2">Design & Estimate</h3>
                <p class="text-neutral-600 leading-relaxed">We create a detailed plan with materials, finishes, timeline, and a transparent quote.</p>
              </div>
            </div>
            <div class="flex gap-5">
              <div class="flex-shrink-0">
                <div class="w-14 h-14 rounded-full bg-primary-500 flex items-center justify-center shadow-lg">
                  <span class="text-xl font-heading font-bold text-neutral-900">03</span>
                </div>
                <div class="w-0.5 h-8 bg-primary-200 mx-auto mt-2"></div>
              </div>
              <div class="pt-2">
                <h3 class="text-xl font-heading font-semibold text-neutral-900 mb-2">Build</h3>
                <p class="text-neutral-600 leading-relaxed">Our skilled craftsmen execute the project with precision and care.</p>
              </div>
            </div>
            <div class="flex gap-5">
              <div class="flex-shrink-0">
                <div class="w-14 h-14 rounded-full bg-primary-500 flex items-center justify-center shadow-lg">
                  <span class="text-xl font-heading font-bold text-neutral-900">04</span>
                </div>
              </div>
              <div class="pt-2">
                <h3 class="text-xl font-heading font-semibold text-neutral-900 mb-2">Reveal</h3>
                <p class="text-neutral-600 leading-relaxed">Final walkthrough to ensure everything exceeds your expectations.</p>
              </div>
            </div>
          </div>

          <div class="mt-10">
            <a href="/contact" class="btn btn-primary text-lg px-8 py-4">
              Get Started Today
              <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3" />
              </svg>
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- 6. Why Choose Us ‚Äî same component as homepage -->
  <WhyChooseUs />

  <!-- 7. Featured Work ‚Äî project photo grid -->
  <FeaturedWork />

  <!-- 8. Intermediate CTA -->
  <CTAIntermediate
    headline="Like What You See?"
    subheadline="Let's discuss your project. Free estimates, no obligation."
    variant="primary"
  />

  <!-- 9. Scroll Gallery ‚Äî bonus visual section with kitchen/bath focus -->
  <ScrollGallery serviceSlug="kitchen-remodel" title="Our Remodeling Projects" />

  <!-- 10. Google Reviews -->
  <GoogleReviews title="What Charlotte Homeowners Say" />

  <!-- 11. Service Areas -->
  <section class="section section-alt">
    <div class="container">
      <div class="text-center max-w-2xl mx-auto mb-12">
        <h2 class="text-3xl lg:text-4xl font-heading font-bold text-neutral-900 mb-4">
          Remodeling Services Near You
        </h2>
        <p class="text-lg text-neutral-600">
          We serve homeowners throughout the greater Charlotte area.
        </p>
      </div>

      <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
        {locations.map((location) => (
          <a
            href={`/service-areas/${location.slug}`}
            class="bg-white p-4 rounded-lg text-center hover:bg-primary-50 hover:border-primary-200 border border-neutral-200 transition-colors"
          >
            <span class="font-heading font-semibold text-neutral-900">{location.data.name}</span>
            <span class="text-neutral-500 text-sm ml-1">{location.data.state}</span>
          </a>
        ))}
      </div>

      <div class="text-center mt-8">
        <a href="/service-areas" class="text-primary-600 font-heading font-semibold hover:text-primary-700 transition-colors">
          View All Service Areas ‚Üí
        </a>
      </div>
    </div>
  </section>

  <!-- 12. Final CTA -->
  <CTASection
    headline="Ready to Transform Your Space?"
    subtext="Schedule a free consultation and see why Charlotte homeowners trust iFixx for quality remodeling."
  />
</PillarLayout>
